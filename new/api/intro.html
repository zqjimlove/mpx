<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>API参考</title>
    <meta name="description" content="">
    <meta name="generator" content="VuePress 1.4.0">
    <link rel="icon" href="/mpx/new/favicon.ico">
    
    <link rel="preload" href="/mpx/new/assets/css/0.styles.1552acbf.css" as="style"><link rel="preload" href="/mpx/new/assets/js/app.76c57d7d.js" as="script"><link rel="preload" href="/mpx/new/assets/js/2.53062a66.js" as="script"><link rel="preload" href="/mpx/new/assets/js/8.6c31f4dd.js" as="script"><link rel="prefetch" href="/mpx/new/assets/js/10.31a7eb99.js"><link rel="prefetch" href="/mpx/new/assets/js/11.550c472d.js"><link rel="prefetch" href="/mpx/new/assets/js/12.be351307.js"><link rel="prefetch" href="/mpx/new/assets/js/13.64cc60f5.js"><link rel="prefetch" href="/mpx/new/assets/js/14.d638c201.js"><link rel="prefetch" href="/mpx/new/assets/js/15.749f3b4d.js"><link rel="prefetch" href="/mpx/new/assets/js/16.71c9e5ae.js"><link rel="prefetch" href="/mpx/new/assets/js/17.2c54ff85.js"><link rel="prefetch" href="/mpx/new/assets/js/18.630781fe.js"><link rel="prefetch" href="/mpx/new/assets/js/19.6a4e0429.js"><link rel="prefetch" href="/mpx/new/assets/js/20.07280f90.js"><link rel="prefetch" href="/mpx/new/assets/js/21.ee82fff3.js"><link rel="prefetch" href="/mpx/new/assets/js/22.9783afe4.js"><link rel="prefetch" href="/mpx/new/assets/js/23.cbadfd18.js"><link rel="prefetch" href="/mpx/new/assets/js/24.2d79341a.js"><link rel="prefetch" href="/mpx/new/assets/js/25.359d40d7.js"><link rel="prefetch" href="/mpx/new/assets/js/26.b4dec058.js"><link rel="prefetch" href="/mpx/new/assets/js/27.b9e906b0.js"><link rel="prefetch" href="/mpx/new/assets/js/28.f36ac4b6.js"><link rel="prefetch" href="/mpx/new/assets/js/29.c506576d.js"><link rel="prefetch" href="/mpx/new/assets/js/3.edee8f81.js"><link rel="prefetch" href="/mpx/new/assets/js/30.a7a3210f.js"><link rel="prefetch" href="/mpx/new/assets/js/31.71580966.js"><link rel="prefetch" href="/mpx/new/assets/js/32.19be5ee2.js"><link rel="prefetch" href="/mpx/new/assets/js/4.7282b5e3.js"><link rel="prefetch" href="/mpx/new/assets/js/5.481b7d1f.js"><link rel="prefetch" href="/mpx/new/assets/js/6.2d45864e.js"><link rel="prefetch" href="/mpx/new/assets/js/7.8a60cf40.js"><link rel="prefetch" href="/mpx/new/assets/js/9.34c670d1.js">
    <link rel="stylesheet" href="/mpx/new/assets/css/0.styles.1552acbf.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/mpx/new/" class="home-link router-link-active"><img src="/mpx/new/logo.png" alt="" class="logo"> <!----></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/mpx/new/guide/" class="nav-link">
  指南
</a></div><div class="nav-item"><a href="/mpx/new/api/intro.html" class="nav-link router-link-exact-active router-link-active">
  API
</a></div><div class="nav-item"><a href="/mpx/new/extends/intro.html" class="nav-link">
  拓展
</a></div><div class="nav-item"><a href="/mpx/new/version/" class="nav-link">
  2.0迁移
</a></div><div class="nav-item"><a href="/mpx/new/articles/" class="nav-link">
  相关文章
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/mpx/new/guide/" class="nav-link">
  指南
</a></div><div class="nav-item"><a href="/mpx/new/api/intro.html" class="nav-link router-link-exact-active router-link-active">
  API
</a></div><div class="nav-item"><a href="/mpx/new/extends/intro.html" class="nav-link">
  拓展
</a></div><div class="nav-item"><a href="/mpx/new/version/" class="nav-link">
  2.0迁移
</a></div><div class="nav-item"><a href="/mpx/new/articles/" class="nav-link">
  相关文章
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/mpx/new/api/intro.html" class="active sidebar-link">API参考</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/mpx/new/api/intro.html#createapp" class="sidebar-link">createApp</a></li><li class="sidebar-sub-header"><a href="/mpx/new/api/intro.html#createpage" class="sidebar-link">createPage</a></li><li class="sidebar-sub-header"><a href="/mpx/new/api/intro.html#createcomponent" class="sidebar-link">createComponent</a></li><li class="sidebar-sub-header"><a href="/mpx/new/api/intro.html#createstore" class="sidebar-link">createStore</a></li><li class="sidebar-sub-header"><a href="/mpx/new/api/intro.html#topureobject" class="sidebar-link">toPureObject</a></li><li class="sidebar-sub-header"><a href="/mpx/new/api/intro.html#observable" class="sidebar-link">observable</a></li><li class="sidebar-sub-header"><a href="/mpx/new/api/intro.html#extendobservable" class="sidebar-link">extendObservable</a></li><li class="sidebar-sub-header"><a href="/mpx/new/api/intro.html#watch-context-expr-handler" class="sidebar-link">watch(context, expr, handler)</a></li><li class="sidebar-sub-header"><a href="/mpx/new/api/intro.html#mpx-use" class="sidebar-link">mpx.use</a></li><li class="sidebar-sub-header"><a href="/mpx/new/api/intro.html#mpx-mixin" class="sidebar-link">mpx.mixin</a></li></ul></li><li><a href="/mpx/new/api/instance-api.html" class="sidebar-link">Page &amp; Component 新增的实例方法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/mpx/new/api/instance-api.html#this-watch" class="sidebar-link">this.$watch</a></li><li class="sidebar-sub-header"><a href="/mpx/new/api/instance-api.html#nexttick" class="sidebar-link">$nextTick</a></li><li class="sidebar-sub-header"><a href="/mpx/new/api/instance-api.html#updated" class="sidebar-link">$updated</a></li><li class="sidebar-sub-header"><a href="/mpx/new/api/instance-api.html#forceupdate" class="sidebar-link">$forceUpdate</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="api参考"><a href="#api参考" class="header-anchor">#</a> API参考</h1> <p>mpx和mpx-webpack-plugin中暴露出的api文档</p> <h2 id="createapp"><a href="#createapp" class="header-anchor">#</a> createApp</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> mpx<span class="token punctuation">,</span> <span class="token punctuation">{</span>createApp<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@mpxjs/core'</span>
mpx<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span>
<span class="token function">createApp</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span>
</code></pre></div><h2 id="createpage"><a href="#createpage" class="header-anchor">#</a> createPage</h2> <blockquote><p>类微信小程序（微信、百度、头条等）内部使用<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/component.html" target="_blank" rel="noopener noreferrer">Component的方式创建页面<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，所以除了支持页面的生命周期之外还同时<code>支持组件的一切特性</code>。当使用Component创建页面时，<code>页面生命周期</code>需要写在<code>methods内部</code>（微信小程序原生规则），mpx进行了统一封装转换，<code>页面生命周期都写在最外层</code>即可</p></blockquote> <blockquote><p>options的具体形式，除了computed、watch这类mpx扩展特性之外，其他的属性都参照原生小程序的官方文档即可。</p></blockquote> <p>用法：<code>createPage(options, config?)</code></p> <p>config是一个可选参数，应为一个对象。
如果希望标识一个组件是最纯粹的原生组件，不用数据响应等能力，可通过config.isNative传true声明。
如果有需要复写/改写最终调用的创建页面的构造器，可以通过config对象的customCtor提供。<code>注意：mpx本身是用component来创建页面的，如果传page可能在初始化时候生命周期不正常导致取props有一点问题</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> mpx<span class="token punctuation">,</span> <span class="token punctuation">{</span>createPage<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@mpxjs/core'</span>
mpx<span class="token punctuation">.</span><span class="token function">createPage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  data<span class="token operator">:</span> <span class="token punctuation">{</span>test<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  computed<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">test2</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>test <span class="token operator">+</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  watch<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">test</span> <span class="token punctuation">(</span><span class="token parameter">val<span class="token punctuation">,</span> old</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>val<span class="token punctuation">,</span> old<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">onShow</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>test<span class="token operator">++</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">createPage</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span>
</code></pre></div><h2 id="createcomponent"><a href="#createcomponent" class="header-anchor">#</a> createComponent</h2> <blockquote><p>options的具体形式，除了computed、watch这类mpx扩展特性之外，其他的属性都参照原生小程序的官方文档即可。</p></blockquote> <p>用法：<code>createComponent(options, config?)</code></p> <p>config是一个可选参数，应为一个对象。
如果希望标识一个组件是最纯粹的原生组件，不用数据响应等能力，可通过config.isNative传true声明。
如果有需要复写/改写最终调用的创建组件的构造器，可以通过config对象的customCtor提供。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> mpx<span class="token punctuation">,</span> <span class="token punctuation">{</span>createComponent<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@mpxjs/core'</span>
mpx<span class="token punctuation">.</span><span class="token function">createComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  properties<span class="token operator">:</span> <span class="token punctuation">{</span>
    prop<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> Number<span class="token punctuation">,</span>
      value<span class="token operator">:</span> <span class="token number">10</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  data<span class="token operator">:</span> <span class="token punctuation">{</span>test<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  computed<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">test2</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>test <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>prop
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  watch<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">test</span> <span class="token punctuation">(</span><span class="token parameter">val<span class="token punctuation">,</span> old</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>val<span class="token punctuation">,</span> old<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    prop<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function">handler</span> <span class="token punctuation">(</span><span class="token parameter">val<span class="token punctuation">,</span> old</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>val<span class="token punctuation">,</span> old<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      immediate<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// 是否首次执行一次</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">createComponent</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span>
</code></pre></div><h2 id="createstore"><a href="#createstore" class="header-anchor">#</a> createStore</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> mpx<span class="token punctuation">,</span> <span class="token punctuation">{</span>createStore<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@mpxjs/core'</span>
<span class="token keyword">const</span> store1 <span class="token operator">=</span> mpx<span class="token punctuation">.</span><span class="token function">createStore</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span>options <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> store2 <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span>options <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="options选项"><a href="#options选项" class="header-anchor">#</a> options选项</h3> <ul><li><p><strong>state</strong></p> <ul><li><p>类型: <code>Object</code></p> <p>store的根 state 对象。<a href="/mpx/new/api/store/#state">详细介绍</a></p></li></ul></li> <li><p><strong>mutations</strong></p> <ul><li><p>类型: <code>{ [type: string]: Function }</code></p> <p>在 store 上注册 mutation，处理函数总是接受 <code>state</code> 作为第一个参数（如果定义在模块中，则为模块的局部状态），<code>payload</code> 作为第二个参数（可选）。</p> <p><a href="/mpx/new/api/store/#mutation">详细介绍</a></p></li></ul></li> <li><p><strong>actions</strong></p> <ul><li><p>类型: <code>{ [type: string]: Function }</code></p> <p>在 store 上注册 action。处理函数总是接受 <code>context</code> 作为第一个参数，<code>payload</code> 作为第二个参数（可选）。</p> <p><code>context</code> 对象包含以下属性：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  state<span class="token punctuation">,</span>      <span class="token comment">// 等同于 `store.state`</span>
  commit<span class="token punctuation">,</span>     <span class="token comment">// 等同于 `store.commit`</span>
  dispatch<span class="token punctuation">,</span>   <span class="token comment">// 等同于 `store.dispatch`</span>
  getters     <span class="token comment">// 等同于 `store.getters`</span>
<span class="token punctuation">}</span>
</code></pre></div><p>同时如果有第二个参数 <code>payload</code> 的话也能够接收。</p> <p><a href="/mpx/new/api/store/#action">详细介绍</a></p></li></ul></li> <li><p><strong>getters</strong></p> <ul><li>类型: <code>{ [key: string]: Function }</code></li></ul> <p>在 store 上注册 getter，getter 方法接受以下参数：</p> <div class="language- extra-class"><pre class="language-text"><code>state,     // 如果在模块中定义则为模块的局部状态
getters,   // 等同于 store.getters
</code></pre></div><p>注册的 getter 暴露为 <code>store.getters</code>。</p> <p><a href="/mpx/new/api/store/#getters">详细介绍</a></p></li> <li><p><strong>modules</strong></p> <ul><li><p>类型: <code>Object</code></p> <p>包含了子模块的对象，会被合并到 store，大概长这样：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  key<span class="token operator">:</span> <span class="token punctuation">{</span>
    state<span class="token punctuation">,</span>
    mutations<span class="token punctuation">,</span>
    actions<span class="token operator">?</span><span class="token punctuation">,</span>
    getters<span class="token operator">?</span><span class="token punctuation">,</span>
    modules<span class="token operator">?</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>与根模块的选项一样，每个模块也包含 <code>state</code> 和 <code>mutations</code> 选项。模块的状态使用 key 关联到 store 的根状态。模块的 mutation 和 getter 只会接收 module 的局部状态作为第一个参数，而不是根状态，并且模块 action 的 <code>context.state</code> 同样指向局部状态。</p> <p><a href="/mpx/new/api/store/#module">详细介绍</a></p></li></ul></li> <li><p><strong>deps</strong></p> <ul><li><p>类型: <code>Object</code></p> <p>包含了当前store依赖的第三方store：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  store1<span class="token operator">:</span> storeA<span class="token punctuation">,</span>
  store2<span class="token operator">:</span> storeB
<span class="token punctuation">}</span>
</code></pre></div><p><a href="/mpx/new/api/store/#多实例">详细介绍</a></p></li></ul></li></ul> <h4 id="store-实例属性"><a href="#store-实例属性" class="header-anchor">#</a> Store 实例属性</h4> <ul><li><p><strong>state</strong></p> <ul><li><p>类型: <code>Object</code></p> <p>根状态。</p></li></ul></li> <li><p><strong>getters</strong></p> <ul><li><p>类型: <code>Object</code></p> <p>暴露出注册的 getter。</p></li></ul></li></ul> <h4 id="store-实例方法"><a href="#store-实例方法" class="header-anchor">#</a> Store 实例方法</h4> <ul><li><p><strong><code>commit(type: string, payload?: any, options?: Object) | commit(mutation: Object, options?: Object)</code></strong></p> <p>提交 mutation。<a href="/mpx/new/api/store/#mutation">详细介绍</a></p></li> <li><p><strong><code>dispatch(type: string, payload?: any, options?: Object) | dispatch(action: Object, options?: Object)</code></strong></p> <p>分发 action。返回一个Promise。<a href="/mpx/new/api/store/#action">详细介绍</a></p></li> <li><p><strong><code>mapState(map: Array&lt;string&gt; | Object): Object</code></strong></p> <p>为组件创建计算属性以返回 store 中的状态。<a href="/mpx/new/api/store/#mapstate-辅助函数">详细介绍</a></p></li> <li><p><strong><code>mapGetters(map: Array&lt;string&gt; | Object): Object</code></strong></p> <p>为组件创建计算属性以返回 getter 的返回值。<a href="/mpx/new/api/store/#mapgetters-辅助函数">详细介绍</a></p></li> <li><p><strong><code>mapActions(map: Array&lt;string&gt; | Object): Object</code></strong></p> <p>创建组件方法分发 action。<a href="/mpx/new/api/store/#在组件中分发-action">详细介绍</a></p></li> <li><p><strong><code>mapMutations(map: Array&lt;string&gt; | Object): Object</code></strong></p> <p>创建组件方法提交 mutation。<a href="/mpx/new/api/store/#在组件中提交-mutation">详细介绍</a></p></li></ul> <h2 id="topureobject"><a href="#topureobject" class="header-anchor">#</a> toPureObject</h2> <p>由于使用的mobx的响应式数据，所以业务拿到的数据可能是mobx响应式数据实例（包含了些其他属性），使用toPureObject可以将响应式的数据转化成纯js对象</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>toPureObject<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@mpxjs/core'</span>
<span class="token keyword">const</span> pureObject <span class="token operator">=</span> <span class="token function">toPureObject</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span>
</code></pre></div><h2 id="observable"><a href="#observable" class="header-anchor">#</a> observable</h2> <p>用于创建响应式数据，属于mobx提供的能力</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>observable<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@mpxjs/core'</span>
<span class="token comment">// mpx.observable(...)</span>
<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token function">observable</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span>
</code></pre></div><h2 id="extendobservable"><a href="#extendobservable" class="header-anchor">#</a> extendObservable</h2> <p>用于扩展响应式数据，属于mobx提供的能力, 主要用于添加新的可观察数据, <code>并不会触发订阅者更新</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>observable<span class="token punctuation">,</span> extendObservable<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@mpxjs/core'</span>
<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token function">observable</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span>
<span class="token comment">// mpx.extendObservable(...)</span>
<span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token function">extendObservable</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token punctuation">{</span>newProp<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="watch-context-expr-handler"><a href="#watch-context-expr-handler" class="header-anchor">#</a> watch(context, expr, handler)</h2> <p>用于观察数据从而触发相应操作</p> <ul><li>context 回调执行的上下文</li> <li>expr 观察的表达式[String | Function]。可以是path字符串（取值将在context上进行查找），也可以是函数</li> <li>handler 响应函数[Function | Object]。如果是对象，则handler.handler为回调函数，其他参数作为options，与组件的watch一致</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> mpx<span class="token punctuation">,</span> <span class="token punctuation">{</span>watch<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@mpxjs/core'</span>
<span class="token comment">// mpx.watch(...)</span>
<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token function">observable</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">watch</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
  <span class="token keyword">return</span> a<span class="token punctuation">.</span>name
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'update a.name'</span><span class="token punctuation">,</span> val<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
a<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token number">10</span>
</code></pre></div><h3 id="mpx-set-mpx-remove"><a href="#mpx-set-mpx-remove" class="header-anchor">#</a> mpx.set &amp; mpx.remove</h3> <p>用于对一个响应式对象新增或删除属性，会<code>触发订阅者更新操作</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> mpx<span class="token punctuation">,</span> <span class="token punctuation">{</span>observable<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@mpxjs/core'</span>
<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token function">observable</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
mpx<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token string">'age'</span><span class="token punctuation">,</span> <span class="token string">'test'</span><span class="token punctuation">)</span>
mpx<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token string">'age'</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="mpx-use"><a href="#mpx-use" class="header-anchor">#</a> mpx.use</h2> <p>mpx.use用于安装外部扩展, 支持多参数，如果第二个参数是一个包含（prefix or postfix）的option，
那么将会对插件扩展的属性添加前缀或后缀（主要考虑插件开发者直接导出的属性可能存在同名问题，use时指定
前缀或后缀能在业务角度去处理这种情况）</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> mpx <span class="token keyword">from</span> <span class="token string">'@mpxjs/core'</span>
<span class="token keyword">import</span> test <span class="token keyword">from</span> <span class="token string">'./test'</span>
mpx<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>test<span class="token punctuation">)</span>
mpx<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>test<span class="token punctuation">,</span> <span class="token punctuation">{</span>prefix<span class="token operator">:</span> <span class="token string">'mpx'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'otherparams'</span><span class="token punctuation">)</span>
</code></pre></div><p><a href="/mpx/new/api/extend/">具体例子</a></p> <h2 id="mpx-mixin"><a href="#mpx-mixin" class="header-anchor">#</a> mpx.mixin</h2> <p>用于注入mixin</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> mpx <span class="token keyword">from</span> <span class="token string">'@mpxjs/core'</span>
mpx<span class="token punctuation">.</span><span class="token function">mixin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">$fetch</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> types<span class="token punctuation">)</span>
</code></pre></div><h3 id="types选项"><a href="#types选项" class="header-anchor">#</a> types选项</h3> <p>types决定了mixin会注入到哪种实例上，app | page | component</p> <ul><li>String, 'app' | 'page' | 'component'</li> <li>Array, ['app', 'page', 'component']</li> <li>如果不传，默认为['app', 'page', 'component']</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/mpx/new/api/instance-api.html">
        Page &amp; Component 新增的实例方法
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/mpx/new/assets/js/app.76c57d7d.js" defer></script><script src="/mpx/new/assets/js/2.53062a66.js" defer></script><script src="/mpx/new/assets/js/8.6c31f4dd.js" defer></script>
  </body>
</html>
