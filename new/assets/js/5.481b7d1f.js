(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{248:function(t,n,a){t.exports=a.p+"assets/img/start-tips2.7d8836f8.png"},249:function(t,n,a){t.exports=a.p+"assets/img/start-tips1.3b76ac97.png"},267:function(t,n,a){"use strict";a.r(n);var s=a(28),e=Object(s.a)({},(function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"单文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#单文件"}},[t._v("#")]),t._v(" 单文件")]),t._v(" "),s("p",[t._v("介绍单文件编译开发特性，包括单文件中有哪些部分以及如何进行ide配置等")]),t._v(" "),s("h2",{attrs:{id:"介绍"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#介绍"}},[t._v("#")]),t._v(" 介绍")]),t._v(" "),s("p",[t._v("按照小程序的文件规范，app & page & component 的组成部分都是四个文件，js, wxss, wxml, json; 多文件的形式在开发上体验并不是特别友好，使用过"),s("code",[t._v("vue")]),t._v("的同学都知道，单文件的开发模式更内聚，更可维护。因此mpx也提供了单文件开发模式，文件扩展名为 "),s("code",[t._v(".mpx")])]),t._v(" "),s("p",[t._v("通过 "),s("code",[t._v("webpack")]),t._v(" 构建工具和 "),s("code",[t._v("mpx-loader")]),t._v(" 可以将文件扩展名为 .mpx 的 "),s("code",[t._v("single file component")]),t._v(" 转换成小程序所需要的四个文件。")]),t._v(" "),s("p",[t._v("这四个文件对应于单文件中的四个区域")]),t._v(" "),s("h3",{attrs:{id:"基础例子"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基础例子"}},[t._v("#")]),t._v(" 基础例子")]),t._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--对应wxml文件--\x3e")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("view")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("hello mpx"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("view")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--对应js文件--\x3e")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--对应wxss文件--\x3e")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("style")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("lang")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("stylus"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token style"}},[s("span",{pre:!0,attrs:{class:"token language-css"}},[t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("style")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--对应json文件--\x3e")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("application/json"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("h2",{attrs:{id:"编辑器-ide高亮、提示"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#编辑器-ide高亮、提示"}},[t._v("#")]),t._v(" 编辑器/IDE高亮、提示")]),t._v(" "),s("ul",[s("li",[s("RouterLink",{attrs:{to:"/guide/what-is-single-file.html#IntelliJ"}},[t._v("IntelliJ")])],1),t._v(" "),s("li",[s("RouterLink",{attrs:{to:"/guide/what-is-single-file.html#vscode"}},[t._v("vscode")])],1)]),t._v(" "),s("h4",{attrs:{id:"intellij"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#intellij"}},[t._v("#")]),t._v(" IntelliJ")]),t._v(" "),s("p",[t._v("如果使用IntelliJ系IDE开发，可将mpx后缀文件关联到vue类型，按vue解析。\n"),s("img",{attrs:{src:a(248),alt:"关联文件类型"}}),t._v("\n但会报一个warning提示有重复的script标签，关闭该警告即可。\n"),s("img",{attrs:{src:a(249),alt:"关闭警告"}})]),t._v(" "),s("h4",{attrs:{id:"vscode"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vscode"}},[t._v("#")]),t._v(" vscode")]),t._v(" "),s("p",[s("code",[t._v(".mpx")]),t._v("采用类似于"),s("code",[t._v(".vue")]),t._v("的单文件语法风格，在Visual Studio Marketplace中获取"),s("a",{attrs:{href:"https://marketplace.visualstudio.com/items?itemName=liuji-jim.vue",target:"_blank",rel:"noopener noreferrer"}},[t._v("vue语法高亮插件"),s("OutboundLink")],1),t._v("\n然后通过"),s("a",{attrs:{href:"https://code.visualstudio.com/docs/languages/overview#_adding-a-file-extension-to-a-language",target:"_blank",rel:"noopener noreferrer"}},[t._v("配置vscode扩展语言"),s("OutboundLink")],1),t._v("\n，将"),s("code",[t._v(".mpx")]),t._v("绑定到"),s("code",[t._v(".vue")]),t._v("语法的支持")]),t._v(" "),s("blockquote",[s("p",[t._v("下方的方案为社区同学贡献，通过更多的插件使用，可能在某些功能上有所增强，但也可能遇到一些其他问题，请个人判断是否需要")])]),t._v(" "),s("h5",{attrs:{id:"vscode插件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vscode插件"}},[t._v("#")]),t._v(" vscode插件")]),t._v(" "),s("p",[s("strong",[t._v("更新")]),t._v(": "),s("code",[t._v("minapp")]),t._v("最新版已经支持了mpx，所以对"),s("code",[t._v("minapp")]),t._v("的使用加以修改")]),t._v(" "),s("ol",[s("li",[s("code",[t._v("minapp")]),t._v("此插件主要功能是给"),s("code",[t._v("template")]),t._v("加上"),s("code",[t._v("wxml")]),t._v("的"),s("code",[t._v("snippet")]),t._v("功能，只要在 template 标签中添加属性"),s("code",[t._v("minapp='mpx' xlang='wxml'")]),t._v("就可以使用")]),t._v(" "),s("li",[s("code",[t._v("wechat-snippet")]),t._v("，主要是使用里面的"),s("code",[t._v("wx.xxx")]),t._v("的snippet")]),t._v(" "),s("li",[s("code",[t._v("vetur")]),t._v("主要使用其高亮和格式化功能，配套安装有"),s("code",[t._v("prettier")]),t._v("，新版配置为")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v(' "vetur.format.defaultFormatterOptions": {\n    "prettyhtml": {\n      "printWidth": 100, // No line exceeds 100 characters\n      "singleQuote": false // Prefer double quotes over single quotes\n    },\n    "prettier": {\n      // Prettier option here\n      "semi": false,\n      "singleQuote": true,\n      "eslintIntegration": true\n    }\n  }\n')])])]),s("p",[s("strong",[t._v("注意")]),t._v(":")]),t._v(" "),s("ol",[s("li",[t._v("当添加了"),s("code",[t._v('xlang="wxml"')]),t._v("后，可以使用"),s("code",[t._v("vetur")]),t._v("配置的"),s("code",[t._v("template")]),t._v("的格式化，但是会存在vue插件的"),s("code",[t._v("snippet")])]),t._v(" "),s("li",[s("strong",[t._v("在改成"),s("code",[t._v('xlang="wxml"')]),t._v("后，虽然能格式化了，但是"),s("code",[t._v("image")]),t._v("和"),s("code",[t._v("input")]),t._v("标签的格式化会出问题，所以最好在最后完成的时候，改回"),s("code",[t._v('lang="wxml"')]),t._v("关闭格式化")])]),t._v(" "),s("li",[t._v("注意使用vscode的工作区功能，最好把"),s("code",[t._v("vue")]),t._v("插件相关提示先关闭了")]),t._v(" "),s("li",[t._v("因为"),s("code",[t._v("mpx")]),t._v("单文件具有两个script标签，直接格式化会出问题，需要")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('<script  type=\'application/json\' lang=\'json\'>\n{\n "navigationBarTitleText": "",\n "usingComponents": {\n\n }\n}\n<\/script>\n')])])]),s("p",[t._v("如上，需要在json的script中，加上"),s("code",[t._v('lang="json"')]),t._v("这样就不会对这个标签进行格式化")]),t._v(" "),s("h5",{attrs:{id:"vscode代码片段"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vscode代码片段"}},[t._v("#")]),t._v(" vscode代码片段")]),t._v(" "),s("p",[t._v("此功能主要是为了新建文件后快速生成一些代码，只要在设置里，选择"),s("code",[t._v("用户代码片段")]),t._v("，在选择"),s("code",[t._v("vue.json")]),t._v("，将以下代码复制进去。之后只要输出写好的"),s("code",[t._v("prefix")]),t._v("，就能自动提示生成。\n如此你也可以对"),s("code",[t._v("javascript.json")]),t._v("做一些自定义的代码片段")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('"Print to weapp page": {\n "prefix": "page",\n "body": [\n   "<template minapp=\'native\' xlang=\'wxml\'>",\n   "  <view class=\'container\'>\\n",\n   "  </view>",\n   "</template>\\n",\n   "<script>",\n   "import { createPage } from \'@mpxjs/core\'",\n   "  createPage({",\n   "    data: {",\n   "    },",\n   "    onShow() {",\n   "      // 所在页面显示之后就会执行一次",\n   "      console.log(\'page show\')\\n",\n   "    },",\n   "    onHide() {",\n   "      // 页面切入后台执行",\n   "     console.log(\'page hide\')\\n",\n   "    },",\n   "    /**",\n   "     * 页面相关事件处理函数--监听用户下拉动作",\n   "    */",\n   "    onPullDownRefresh() {},",\n   "    /**",\n   "     * 页面上拉触底事件的处理函数",\n   "    */",\n   "    onReachBottom() {},",\n   "     /**",\n   "       * 用户点击右上角分享",\n   "     */",\n   "    onShareAppMessage() {},"\n   "  })",\n   "<\/script>\\n",\n   "<style lang=\'scss\'>\\n",\n   " .container {} ",\n   "</style>",\n   "<script  type=\'application/json\' lang=\'json\'>",\n   "{",\n   " \\"navigationBarTitleText\\": \\"搜索\\",",\n   " \\"usingComponents\\": {}",\n   "}",\n   "<\/script>\\n",\n   "$2"\n ],\n "description": "weapp page"\n},\n"Print to weapp components": {\n "prefix": "components",\n "body": [\n   "<template minapp=\'native\' xlang=\'wxml\'>",\n   "  <view class=\'container\'>\\n",\n   "  </view>",\n   "</template>\\n",\n   "<script>",\n   "import { createComponent } from \'@mpxjs/core\'",\n   "  createComponent({",\n   "    properties: {\\n},",\n   "    data: {",\n   "    },",\n   "    pageShow() {",\n   "      // 所在页面显示之后就会执行一次",\n   "      console.log(\'page show\')\\n",\n   "    },",\n   "    pageHide() {",\n   "      // 页面切入后台执行",\n   "     console.log(\'page hide\')\\n",\n   "    },",\n   "    methods: {\\n",\n   "    }",\n   "  })",\n   "<\/script>\\n",\n   "<style lang=\'scss\'>\\n",\n   " .container {} ",\n   "</style>",\n   "<script  type=\'application/json\' lang=\'json\'>",\n   "{ ",\n   " \\"component\\": true",\n   "}",\n   "<\/script>\\n",\n   "$2"\n ],\n "description": "weapp components"\n}\n')])])])])}),[],!1,null,null,null);n.default=e.exports}}]);